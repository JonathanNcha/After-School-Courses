<!DOCTYPE html>
<html lang="en">

<!-- 
    Jonathan Ncha
    jn652@live.mdx.ac.uk
    M00852269
-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>After School Club</title>
    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div id="app">
        <!-- shows cart items -->
        <header>
            <h1 v-text="sitename"></h1>
            <button disabled type="button" class="btn btn-secondary btn-sm"><span class="fas fa-cart-plus"> </span> Cart
                <span class="badge">{{cartItemCount}}</span></button>
        </header>
        <br>
        <main>
            <!-- shows course information -->
            <div v-if='showcourse'>
                <div class="aligned">
                    <i class="far fa-calculator-alt fa-10x"></i>
                    <span>
                        <p>Subject: {{course.title}}</p>
                        <p>Location: {{course.location}}</p>
                        <p>Price: {{course.price}}</p>
                        <p>Spaces: {{course.availableSpace}}</p>
                    </span>
                </div>
                <br>
                <button class="btn btn-primary btn-sm" v-on:click='addToCart' v-if='canAddToCart'>Add to
                    cart</button>
                <button class="btn btn-primary " disabled="disabled" v-else>Add to cart</button>

            </div>
            <div v-else>
                <h2>Checkout</h2>
            </div>

        </main>
    </div>

    <!-- internal stylesheet -->
    <style>
        #app {
            margin: 5%;
        }

        .aligned {
            display: flex;
            align-items: center;
        }

        span {
            padding-left: 20px;
        }
    </style>

    <!-- Initializing the vue app -->
    <script>
        var webstore = new Vue({
            el: '#app',
            data: {
                sitename: 'After School Club',
                course: {
                    id: 1001,
                    title: "Math",
                    location: "London",
                    price: 100,
                    availableSpace: 5
                },
                cart: [],
                showcourse: true
            },

            methods: {
                // adds the course to the cart and reduces the available spaces
                addToCart: function () {
                    this.cart.push(this.course.id);
                    if (this.course.availableSpace > 0) { this.course.availableSpace -= 1 };
                }

            },

            computed: {
                // function checks if there are still available spaces for the course
                canAddToCart: function () {
                    return this.course.availableSpace > 0;
                },
                // counts the items in the cart
                cartItemCount() {
                    return this.cart.length;
                }
            }
        });
    </script>
</body>

</html>
